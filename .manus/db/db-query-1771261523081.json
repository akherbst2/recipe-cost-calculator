{
  "query": "\n-- Get unit conversion patterns\nSELECT \n  JSON_UNQUOTE(JSON_EXTRACT(eventData, '$.usedUnit')) as used_unit,\n  JSON_UNQUOTE(JSON_EXTRACT(eventData, '$.packageUnit')) as package_unit,\n  COUNT(*) as conversion_count\nFROM events\nWHERE eventType = 'ingredient_add'\n  AND JSON_EXTRACT(eventData, '$.usedUnit') IS NOT NULL\n  AND JSON_EXTRACT(eventData, '$.packageUnit') IS NOT NULL\n  AND JSON_UNQUOTE(JSON_EXTRACT(eventData, '$.usedUnit')) != JSON_UNQUOTE(JSON_EXTRACT(eventData, '$.packageUnit'))\nGROUP BY used_unit, package_unit\nORDER BY conversion_count DESC\nLIMIT 15;\n\n-- Get Try Example button usage\nSELECT \n  COUNT(*) as try_example_clicks,\n  COUNT(DISTINCT sessionId) as unique_sessions_clicked\nFROM events\nWHERE eventType = 'button_click'\n  AND JSON_UNQUOTE(JSON_EXTRACT(eventData, '$.buttonName')) = 'Try Example';\n\n-- Check how many users complete a full ingredient (all fields filled)\nSELECT \n  COUNT(*) as total_ingredient_adds,\n  SUM(CASE \n    WHEN JSON_EXTRACT(eventData, '$.ingredientName') IS NOT NULL \n    AND JSON_EXTRACT(eventData, '$.usedQuantity') > 0\n    AND JSON_EXTRACT(eventData, '$.packageCost') > 0\n    AND JSON_EXTRACT(eventData, '$.packageSize') > 0\n    THEN 1 ELSE 0 \n  END) as complete_ingredients,\n  ROUND(100.0 * SUM(CASE \n    WHEN JSON_EXTRACT(eventData, '$.ingredientName') IS NOT NULL \n    AND JSON_EXTRACT(eventData, '$.usedQuantity') > 0\n    AND JSON_EXTRACT(eventData, '$.packageCost') > 0\n    AND JSON_EXTRACT(eventData, '$.packageSize') > 0\n    THEN 1 ELSE 0 \n  END) / COUNT(*), 2) as completion_rate_percent\nFROM events\nWHERE eventType = 'ingredient_add';\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2vGuTCYzpyNQ1XN.root --database cUKXq5uw3eiWGpv5roCqyH --execute \n-- Get unit conversion patterns\nSELECT \n  JSON_UNQUOTE(JSON_EXTRACT(eventData, '$.usedUnit')) as used_unit,\n  JSON_UNQUOTE(JSON_EXTRACT(eventData, '$.packageUnit')) as package_unit,\n  COUNT(*) as conversion_count\nFROM events\nWHERE eventType = 'ingredient_add'\n  AND JSON_EXTRACT(eventData, '$.usedUnit') IS NOT NULL\n  AND JSON_EXTRACT(eventData, '$.packageUnit') IS NOT NULL\n  AND JSON_UNQUOTE(JSON_EXTRACT(eventData, '$.usedUnit')) != JSON_UNQUOTE(JSON_EXTRACT(eventData, '$.packageUnit'))\nGROUP BY used_unit, package_unit\nORDER BY conversion_count DESC\nLIMIT 15;\n\n-- Get Try Example button usage\nSELECT \n  COUNT(*) as try_example_clicks,\n  COUNT(DISTINCT sessionId) as unique_sessions_clicked\nFROM events\nWHERE eventType = 'button_click'\n  AND JSON_UNQUOTE(JSON_EXTRACT(eventData, '$.buttonName')) = 'Try Example';\n\n-- Check how many users complete a full ingredient (all fields filled)\nSELECT \n  COUNT(*) as total_ingredient_adds,\n  SUM(CASE \n    WHEN JSON_EXTRACT(eventData, '$.ingredientName') IS NOT NULL \n    AND JSON_EXTRACT(eventData, '$.usedQuantity') > 0\n    AND JSON_EXTRACT(eventData, '$.packageCost') > 0\n    AND JSON_EXTRACT(eventData, '$.packageSize') > 0\n    THEN 1 ELSE 0 \n  END) as complete_ingredients,\n  ROUND(100.0 * SUM(CASE \n    WHEN JSON_EXTRACT(eventData, '$.ingredientName') IS NOT NULL \n    AND JSON_EXTRACT(eventData, '$.usedQuantity') > 0\n    AND JSON_EXTRACT(eventData, '$.packageCost') > 0\n    AND JSON_EXTRACT(eventData, '$.packageSize') > 0\n    THEN 1 ELSE 0 \n  END) / COUNT(*), 2) as completion_rate_percent\nFROM events\nWHERE eventType = 'ingredient_add';\n",
  "rows": [
    {
      "try_example_clicks": "0",
      "unique_sessions_clicked": "0"
    }
  ],
  "messages": [
    "total_ingredient_adds\tcomplete_ingredients\tcompletion_rate_percent",
    "714\t0\t0.00"
  ],
  "stdout": "try_example_clicks\tunique_sessions_clicked\n0\t0\ntotal_ingredient_adds\tcomplete_ingredients\tcompletion_rate_percent\n714\t0\t0.00\n",
  "stderr": "",
  "execution_time_ms": 486
}